name: Welcome New Contributors

on:
  issues:
    types: [opened]
  pull_request_target:
    types: [opened]

permissions:
  issues: write
  pull-requests: write

jobs:
  welcome:
    runs-on: ubuntu-latest
    
    steps:
    - name: Welcome new contributor
      uses: actions/github-script@v7
      with:
        script: |
          const isFirstTime = context.payload.sender.type !== 'Bot';
          
          if (context.eventName === 'issues') {
            const message = `ğŸ‘‹ Thanks for opening your first issue! 
            
            We appreciate your contribution to the MERN Portfolio project. 
            
            Please make sure you've:
            - [ ] Searched for similar issues
            - [ ] Provided all necessary information
            - [ ] Followed our [Code of Conduct](../CODE_OF_CONDUCT.md)
            
            A maintainer will review your issue soon. In the meantime, feel free to:
            - â­ Star the repository
            - ğŸ“– Read our [documentation](../docs)
            - ğŸ’¬ Join discussions
            
            Happy coding! ğŸš€`;
            
            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: message
            });
          } else if (context.eventName === 'pull_request_target') {
            const message = `ğŸ‰ Thanks for your first pull request!
            
            We're excited to review your contribution to the MERN Portfolio project.
            
            Before we merge, please ensure:
            - [ ] All tests pass
            - [ ] Code follows our [style guide](../docs/development/code-style.md)
            - [ ] Documentation is updated (if needed)
            - [ ] Commits follow [conventional commits](https://www.conventionalcommits.org/)
            
            A maintainer will review your PR soon. Thanks for contributing! ğŸ™Œ`;
            
            github.rest.issues.createComment({
              issue_number: context.issue.number,
              owner: context.repo.owner,
              repo: context.repo.repo,
              body: message
            });
          }
